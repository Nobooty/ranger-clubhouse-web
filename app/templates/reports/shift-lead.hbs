<div class="d-print-none">
  <YearSelect @title="Shift Lead Report" @year={{this.year}} @onChange={{action (mut this.year)}}  />
</div>
{{#if this.dirtShiftTimes}}
  <div class="form-row d-print-none mb-2">
    <div class="col-12 text-muted">
      Use the browser's print command to send this page to the printer. The navigation header, footer, and this message
      will not appear on the page.
    </div>
    <div class="col-12 mt-2">
      <PeriodSelect
              @label="Select a shift"
              @title="Select a shift to report on"
              @periods={{this.shiftOptions}}
              @onSelect={{this.changeShift}}
              @selected={{this.shiftSelect}} />
    </div>
  </div>
{{else}}
  <b class="text-danger">No {{this.year}} shifts could be located.</b>
{{/if}}

{{#if this.isLoading}}
  <LoadingDialog @item="Shift Lead Report"/>
{{else if this.shiftSelect}}
  <h1 class="mt-2">{{dayjs-format this.shiftStart "dddd, MMMM Do YYYY @ HH:mm"}}</h1>

  <div class="row">
    <div class="col-sm-12 col-md-6">
      <div class="border rounded p-2 mb-2">
        <h3>{{pluralize this.dirt_signups.length "Dirt Ranger"}},
          {{#if this.green_dot_total}}
            including {{pluralize this.green_dot_total "Green Dot"}}
          {{else}}
            and no Green Dots
          {{/if}}
        </h3>
        {{#if this.green_dot_total}}
          <p>
            {{#if this.green_dot_females}}
              {{pluralize this.green_dot_females "female Green Dot"}}
            {{else}}
              No female green dots are signed up.
            {{/if}}
          </p>
        {{/if}}
        <h3>{{pluralize this.command_staff_signups.length "Command Staff Ranger"}}</h3>
        <h3>{{pluralize this.non_dirt_signups.length "Special Team Ranger"}}</h3>

      </div>
    </div>

    <div class="col-sm-12 col-md-6">
      <table class="table table-sm table-box table-striped">
        <caption>
          {{pluralize this.below_min_positions.length "position"}} BELOW MIN. STAFFING
        </caption>
        <thead>
        <tr>
          <th>Position</th>
          <th>Shift</th>
          <th class="text-center">Need</th>
          <th class="text-right">Signed Up</th>
        </tr>
        </thead>
        <tbody>
        {{#each this.below_min_positions as |position|}}
          <tr>
            <td>{{position.title}}</td>
            <td>{{time-format position.slot_begins}} - {{time-format position.slot_ends }}</td>
            <td class="text-center">{{#if (eq position.min position.max)}}
              {{position.min}}
            {{else}}
              {{position.min}} - {{position.max}}
            {{/if}}
            </td>
            <td class="text-right">{{if position.signed_up position.signed_up "NONE"}}</td>
          </tr>
        {{else}}
          <tr>
            <td colspan="4">
              <b class="text-success text-center">Well done! All positions are fully staffed for this shift period.</b>
            </td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    </div>
  </div>
  <p>
    Gender = F: Female, M: Male, NB: Non-binary, Q: Queer (unspecified), GF: Gender Fluid, - (dash): not stated<br>
    GTR? = Indicates person signed the Motorpool Vehicle Agreement<br>
    Veh? = Indicates person has BM Org insurance<br>
  </p>
  <ShiftLeadTable @title="DIRT/GREEN DOTS Scheduled" @people={{this.dirt_signups}} />
  <ShiftLeadTable @title="COMMAND STAFF Scheduled" @people={{this.command_staff_signups}} />
  <ShiftLeadTable @title="SPECIAL TEAMS Scheduled" @people={{this.non_dirt_signups}} />
  <p>
    <b>Secret decoder ring:</b>
    Dspch = Dispatcher,
    GD = Green Dot,
    GDLead = Green Dot Lead,
    GerPat = Gerlach Patrol,
    GerLd = Gerlach Patrol Lead,
    GTR = Gator/Golf Cart,
    HSP = Hot Springs Patrol,
    IntDsp = Intercept Dispatch,
    IntOpr = Intercept Operator,
    LNT = Leave No Trace,
    PM = Personnel Manager,
    Opr = Operator,
    RSL = Ranger Shift Lead,
    RSLPre = Ranger Shift Lead (pre-event),
    SC = Shift Coordinator,
    Tow = Tow Truck,
    TowMnt = Tow Truck Mentee,
    VEH = Vehicle (SUV, pick-up)
  </p>
{{/if}}
