<h1>{{year}} Alpha Mentor Assignments</h1>
<p>
  Use this page to assign mentors to Alphas (anyone with the Alpha position).
  Passing or bonking an Alpha here will NOT change the account status. Use the
  'Alpha Conversion' page to mint Shiny Pennies, and/or bonk Alphas.
</p>

<div class="form-row mb-2">
  <label class="col-form-label col-auto">Filter</label>
  <div class="col-auto">
    {{ch-form/select name="filter" value=filter options=filterOptions onChange=(action (mut filter)) controlClass="form-control"}}
  </div>
</div>
Mentor shift = Shift Alpha is signed up for. On Shift = Is the Alpha currently signed into an Alpha shift?
<table class="table table-sm table-hover">
  <caption>Showing {{viewAlphas.length}} of {{alphas.length}}</caption>
  <thead>
    <tr>
      <th>Callsign</th>
      <th>Name</th>
      <th>Mentor Shift</th>
      <th>On Shift</th>
      <th>Mentor 1</th>
      <th>Mentor 2</th>
      <th>Mentor 3</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    {{#each viewAlphas as |person|}}
      <tr>
        <td>
          {{person-link person=person}}
        </td>
        <td>{{person.first_name}} {{person.last_name}}</td>
        <td>
          {{#if person.alpha_slot}}
            {{shift-format person.alpha_slot}}
          {{else}}
            -
          {{/if}}
        </td>
        <td>
          {{yesno person.on_alpha_shift}}
        </td>
        <td>
          {{ch-form/select name=(concat "mentor1_" person.id) value=person.mentors.0.mentor_id onChange=(action (mut person.mentors.0.mentor_id)) options=mentorOptions}}
        </td>
        <td>
          {{ch-form/select name=(concat "mentor1_" person.id) value=person.mentors.1.mentor_id onChange=(action (mut person.mentors.1.mentor_id)) options=mentorOptions}}
        </td>
        <td>
          {{ch-form/select name=(concat "mentor1_" person.id) value=person.mentors.2.mentor_id onChange=(action (mut person.mentors.2.mentor_id)) options=mentorOptions}}
        </td>
        <td>
          {{ch-form/select name=(concat "status_" person.id) value=person.mentor_status onChange=(action (mut person.mentor_status)) options=statusOptions}}
        </td>
      </tr>
      {{#if person.mentor_history}}
        <tr class="no-border">
          <td colspan="8">
            Prior Mentors:
            {{#each person.mentor_history as |history|}}
              {{history.year}} ({{history.status}}):
              {{#each history.mentors as |mentor mentor_idx|}}
                {{if mentor_idx " / "}}{{person-link person=mentor}}
              {{/each}}
              <br>
            {{/each}}
          </td>
        </tr>
      {{/if}}
    {{/each}}
  </tbody>
</table>
<button class="btn btn-primary" disabled={{isSubmitting}} {{action saveAlphas}}>Save Assignments &amp; Results</button>
