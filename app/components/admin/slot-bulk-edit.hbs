{{#unless this.isUpdating}}
  <ModalDialog @title="Bulk Edit {{@position.title}}" @size="xl" @onEscape={{@onClose}} as |Modal|>
    <ChForm @formId="bulkEdit"
            @formFor={{this.editForm}}
            @changeSet={{false}}
            @onSubmit={{this.submitAction}}
            @validator={{this.bulkEditValidations}}
            @onCancel={{@onClose}} as |f|>
      <Modal.body>
        <fieldset>
          <legend>Bulk edit columns (leave field blank to not update)</legend>
          <div class="form-row">
            <f.input @name="positionId" @type="select" @options={{this.positionOptions}} @label="Position"/>
            <f.input @name="description" @label="Description" @type="text" @size={{40}} @maxlength={{40}}
                     @hint="{{if f.model.description f.model.description.length "0"}} of 40 characters."/>
            <f.input @name="max" @label="Max Signups" @type="text"/>
          </div>
          <div class="form-row">
            <f.input @name="url" @label="Information" @type="textarea" @rows={{3}} @cols={{80}} @maxlength={{512}}
                     @hint="{{if f.model.url f.model.url.length "0"}}  of 512 characters."/>
          </div>
          <div class="form-row">
            <div class="col-auto">
              <f.submit @label="Update"/>
            </div>
            <div class="col-auto">
              <UiCancelButton @type="secondary" @onClick={{@onClose}} />
            </div>
          </div>
        </fieldset>

        <fieldset class="mt-2">
          <legend>Select slots to update</legend>
          <table class="table table-sm table-striped table-hover table-width-auto">
            <thead>
            <tr>
              <th>
                <Input @type="checkbox" @checked={{this.selectAll}} {{on "change" this.toggleAll}} />
              </th>
              <th>ID</th>
              <th>From</th>
              <th>To</th>
              <th class="text-right">Max</th>
              <th class="text-right">Count</th>
              <th>Description</th>
              <th>Active</th>
            </tr>
            </thead>
            <tbody>
            {{#each @position.slots key="id" as |slot|}}
              <tr id="slot-{{slot.id}}">
                <td>
                  <f.input @type="checkbox" @name="slot_{{slot.id}}" @inline={{true}} />
                </td>
                <td>{{slot.id}}</td>
                <td>{{shift-format slot.begins}}</td>
                <td>{{shift-format slot.ends}}</td>
                <td class="text-right">{{slot.max}}</td>
                <td class="text-right">{{slot.signed_up}}</td>
                <td>
                  <SlotInfoLink @description={{slot.description}} @info={{slot.url}} />
                </td>
                <td class="text-center">
                  {{#if slot.active}}
                    {{fa-icon "check" color="success"}}
                  {{else}}
                    {{fa-icon "times" color="danger"}}
                  {{/if}}
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </fieldset>
      </Modal.body>
    </ChForm>
  </ModalDialog>
{{/unless}}
{{#if this.slotUpdating}}
  <LoadingDialog>
    Updating slot ID #{{this.slotUpdating.id}}
  </LoadingDialog>
{{/if}}